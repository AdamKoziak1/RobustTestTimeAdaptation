TODO:
  resnet18 first, then resnet50
    models other than resnet18 will need change in layer selection for cr_loss

  low rank augmentation of image (throw away high rank values - noise)
    maybe just lower layers
    SVD, remove lowest values (below threshold) and reconstruct feature maps 
      threshold ~60 eliminates about 8/255 worth of noise. stronger effect on attacked than regular (verify why?) 
      implement into model somehow
      get rid of extra files and push

  EMV update

  class prototypes
    cosine similarity to classify each feature based on mean features 

  LORA:
    update requirements for peft
    push updates files

  use PL loss combined with MI - check SHOT


svd variations:
erm     185
tent    160 185
PL      130 185
SHOT-IM 145 185
T3A     150 185
TSD     125 190
TTA3-MI 150 185
TTA3-CR 160 185

ideas:
lp-bounded attacks could operate in low singular value space
  what if attacker knows this?
    consider stronger attacks
      (AutoAttack‑TTA and DIA; integrate ImageNet‑C subset)
theory note on spectral filtering + BN; derive error bound
profile runtime more precisely


learnable svd threshold?

do spectral filtering on feature tensor


