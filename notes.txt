TODO:

  -try learnable skip connection 
  -general module for different types of denoising?
  -add unified block for model input instead of dataloader svd stuff?

try DCT?






  look into lowrank methods. what is novel


  introduce learnable parameter over the local smoothing/"message passing"
  regularize on global frequency

  minimize nuclear norm
    -use closed form solution

    convolution with affinity = gnn

  theory note on spectral filtering + BN; derive error bound

  ablation on each param (use best combination and vary only the one of interest)
    -rerun this


  maybe ensemble as backup

  profile runtime more precisely

  resnet18 first, then resnet50
    models other than resnet18 will need change in layer selection for cr_loss and stuff

ideas:
lp-bounded attacks could operate in low singular value space
  what if attacker knows this?
    consider stronger attacks
      (AutoAttack‑TTA and DIA; RTTDP, integrate ImageNet‑C subset)



  class prototypes
    cosine similarity to classify each feature based on mean features 




choose 4 tta method
  add fft in first block
  add in input?
  to show that it's a general framework


illustrate fft and hyperparam meaning
explicitly mathematically formulate it and describe

ablate on input only, feature only, on one domain from each dataset

report 30 and 70 instead of 50

write title and abstract


  present approach as a framework
  equations
  figures






use rl for choosing trust region in a batch, determining filtration/mixing factor
replay buffer can be composed as the batches come, maybe lowrank version is stored to reproject and add? woudl that be more efficient?
  some kind of signal: rate of change of prediction entropy as frequency range is tightened?
    -perhaps modulated by mutual information type batchwise measure






(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find PACS/art_painting/ -type f | wc -l
2048
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find PACS/cartoon/ -type f | wc -l
2344
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find PACS/photo/ -type f | wc -l
1670
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find PACS/sketch/ -type f | wc -l
3929

(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find VLCS/Caltech101/ -type f | wc -l
1415
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find VLCS/LabelMe/ -type f | wc -l
2656
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find VLCS/SUN09/ -type f | wc -l
3282
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find VLCS/VOC2007/ -type f | wc -l
3376

(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find office-home/Art/ -type f | wc -l
2427
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find office-home/Clipart/ -type f | wc -l
4365
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find office-home/Product/ -type f | wc -l
4439
(base) adam@SCS-GPU-2024-5:~/Downloads/RobustTestTimeAdaptation/datasets$ find office-home/RealWorld/ -type f | wc -l
4357


to remove:
svd_input_rank_ratio
svd_feat_rank_ratio
svd_feat_max_layer
fft_input_mode
fft_input_use_residual
fft_input_learn_alpha
fft_feat_mode
fft_feat_use_residual
fft_feat_learn_alpha
